<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录页面</title>
    <link rel="stylesheet" type="text/css" href="@Href("~/")Content/css/bootstrap.css">
    <style type="text/css">
        html,body{
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        li{list-style: none;}
        ul{
            margin: 0;
            padding: 0;
        }
        .page{
            width: 100%;
            height: 100%;
            text-align: center;
            background-image: url(@Href("~/")Content/image/middleR.jpg);
            background-size: 100%;
            position: relative;
        }
        .head{
            color: #fff;
            font-size: 40px;
            margin-top: 50px;
            display: inline-block;
        }

        .foot{
            bottom: 40px;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        #login_box {
            margin: 0 auto;
            margin-top: 40px;
            width: 400px;
            background: #fff;
            border-radius: 5px;
            padding: 20px;
        }
    </style>

</head>
<body>
    <div class="page">
        <div class="head">
            <span id="labCompany">东莞惠森木业有限公司</span>
            <br />
            信息管理系统
        </div>
        <div id="login_box">
            <form class="form-horizontal" role="form">
                <div class="form-group">
                    <label for="username" class="col-sm-3 control-label">用户名</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="username" id="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password" class="col-sm-3 control-label">密码</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" name="password" id="password">
                    </div>
                </div>
                <button type="button" id="btn_login" class="btn btn-primary">登录</button>
            </form>
        </div>
        <div class="foot">Copyright &copy; 2013-2014 WoodenoxTools All Rights Reserved</div>
    </div>

    <script src="@Href("~/")Scripts/jquery.js"></script>
    <script src="@Href("~/")Scripts/bootstrap.js"></script>
    <script src="@Href("~/")Scripts/common.js"></script>
    <script type="text/javascript">
        $(function () {
            var root = getRootPath();
            var usernameBox = $("#username");
            var passwordBox = $("#password");
            var loginBtn = $("#btn_login");
            loginBtn.on("click", function () {
                if(!usernameBox.val() || !passwordBox.val()) {
                    alert("用户名和密码不能为空!");
                    return;
                }
                $.ajax({
                    type: 'post',
                    url: root + "/user/login",
                    dataType: 'json',
                    data: {
                        Username: usernameBox.val(),
                        Password: passwordBox.val()
                    },
                    beforeSend: function() {
                        loginBtn.prop("disabled", true);
                        loginBtn.text("正在登录...");
                    },
                    success: function (result) {
                        loginBtn.prop("disabled", false);
                        loginBtn.text("登录");
                        if (result.status) {
                            window.location.href = root + "/user/notice";
                        } else {
                            alert(result.message);
                        }
                    }
                });
            });

            $("#login_box").on("keydown", "input", function(event) {
                if(event.keyCode == 13) loginBtn.click();
            });
        })
    </script>
</body>
</html>